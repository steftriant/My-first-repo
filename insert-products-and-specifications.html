<form role="form" name="insertForm">
	<script cam-script type="text/form-script">
		var product = $scope.product = [];																						// Custom JavaScript creates a JavaScript Object and binds it to the current AngularJS $scope of the form as a variable named "product".															                                                        
		$scope.addProduct = function () {																						// We make a function named "addProduct".
			var product = {};																									// We add a new "product" to the Array.
			product.Category = $scope.Category;
			product.BriefDescription = $scope.BriefDescription;
			if (!!$scope.camForm.fields[0].element[0].files[0]) {
				product.DetailedDescription = $scope.camForm.fields[0].element[0].files[0].name;								// We check whether a file is uploaded.
			} else {
					return;																										// If no file is uploaded, it returns "undefined".
			}
			product.Price = $scope.Price;
			$scope.product.push(product);																						// We use the value of the "product" input field to add a new "product" to the Array.
			$scope.Category = "";																								// We clear the TextBox "Category".
			$scope.BriefDescription = "";																						// We clear the TextBox "BriefDescription".
			$scope.DetailedDescription = "";																					// We clear the TextBox "DetailedDescription".
			$scope.Price = "";																									// We clear the TextBox "Price".
		};
		$scope.removeProduct = function (index) {																				// We make a function named "removeProduct". 					
			var category = $scope.product[index].Category;																		// We find product's Category using "index" from the Array and binds it to the current AngularJS $scope of the form as a variable named "category".
			$scope.product.splice(index, 1);																					// We use an index to remove a "product" from the Array.
		}
		$scope.isAddFormValid = function () {																					// We make a function named "isAddFormValid".
			return ($scope.Category &&
					$scope.BriefDescription &&
					$scope.camForm.fields[0].element[0].files[0] &&
					$scope.Price) ? true : false;																				// If all of the 4 parameters of variable "product" are added, the value will be "true", otherwise the value will be "false".
		}
		camForm.on('form-loaded', function() {																					// We hook into the lifecycle of Camunda SDK JS Form.
			camForm.variableManager.createVariable ({																			// We "create" (declare) a new process variable  
					name:'product',																								// named 'product' and
					type:'json',																								// provide as type information 'json' used for serialization.
					value:product
			});
		});
		camForm.on('submit', function(evt) {																					// We hook into the lifecycle of Camunda SDK JS Form.
			if (product.length<1) {																								// If no "product" is added,
				evt.submitPrevented = true;																						// an event handler prevents the form from being submitted by setting the property "submitPrevented" to 'true'.
			}
		});
	</script>
	<h2>My List of Products</h2>																								<!-- We set the heading of the HTML Table. -->
	<div>													
		<table style="width:100%;">																								<!-- The HTML Table is populated from the JSON Array "product" using a "ng-repeat" directive. -->
			<thead>																												<!-- We group the header content in the HTML Table. -->
				<tr>																											<!-- Each row of the Table consists of 4 HTML Input Form fields and a button. -->
					<th style="width:140px;">Category</th>
					<th style="width:305px;">Brief Description</th>
					<th style="width:250px;">Detailed Description</th>
					<th style="width:75px;" >Price</th>
					<th></th>
				</tr>
			</thead>
			<tbody ng-repeat="x in product track by $index">																	<!-- A "ng-repeat" directive is assigned to each row of the HTML Table in order to repeat all the objects of the JSON Array "product". -->
				<tr>													
					<td><input style="width:140px;" type="text" value="{{x.Category}}" readonly /></td>						
					<td><input style="width:305px;" type="text" value="{{x.BriefDescription}}" readonly /></td>
					<td><input style="width:250px;" type="text" value="{{x.DetailedDescription}}" readonly /></td>	
					<td><input style="width:75px;"  type="number" value="{{x.Price}}" readonly /></td>
					<td><input type="button" ng-click="removeProduct($index)" value="Remove" /></td>							<!-- The "ng-click" directive is assigned to the button and calls the function named "removeProduct" with the current "$index" when button is clicked. -->
				</tr>
			</tbody>
		</table>
	</div>
	<hr>																														<!-- We separate the HTML content. -->
	<div>
		<h2>Add a new Product</h2>																								<!-- We set the heading of the HTML Form. -->
		<div class="row">																										<!-- We set the "1st row" of the HTML Form. -->	
			<div class="col-md-6">																								<!-- We use "md" for "medium" screen devices of width equal to or greater than 992px and "6" for adding 6 columns. -->															
				<div class="form-group">																						<!-- We use "form-group" for optimum spacing. -->
					<label class="control-label" for="category">Category</label>
					<div class="controls">
						<input style="width:140px;" id="category" type="text" ng-model="Category" />							<!-- The "ng-model" directive binds the value of the "Category" input field to the created variable "Category" in AngularJS. -->
					</div>
				</div>
			</div>
			<div class="col-md-6">																								
				<div class="form-group">
					<label class="control-label" for="briefDescription">Brief Description</label>
					<div class="controls">
						<input style="width:305px;" id="briefDescription" type="text" ng-model="BriefDescription" />			<!-- The "ng-model" directive binds the value of the "Brief Description" input field to the created variable "BriefDescription" in AngularJS. -->	
					</div>
				</div>
			</div>
		</div>
		<div class="row">																										<!-- We set the "2nd row" of the HTML Form. -->
			<div class="col-md-6">
				<div class="form-group">
					<label class="control-label" for="detailedDescription">Detailed Description</label>
					<div class="controls">
						<input style="width:250px;"
							   id="detailedDescription"
							   type="file"
							   cam-variable-name="DetailedDescription"
							   cam-variable-type="File"
							   cam-max-filesize="10000000" ng-model="DetailedDescription" />									<!-- The "ng-model" directive binds the value of the "Detailed Description" input field to the created variable "DetailedDescription" in AngularJS. -->
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="form-group">
					<label class="control-label" for="price">Price</label>
					<div class="controls">
						<input style="width:75px;" id="price" type="number" ng-model="Price" />									<!-- The "ng-model" directive binds the value of the "Price" input field to the created variable "Price" in AngularJS. -->
					</div>
				</div>
			</div>
		</div>
		<div class="row">																										<!-- We set the "3rd row" of the HTML Form. -->
			<div class="col-md-4">																								<!-- We use "md" for medium screen devices of width equal to or greater than 992px and "4" for adding 4 columns. -->
				<div class="controls">
					<input type="button" ng-click="addProduct()" ng-show="isAddFormValid()" value="Add" />						<!-- The "ng-show" directive shows the input element ("button") only if the "isAddFormValid()" expression (function) returns "true". The "ng-click" directive is assigned to the button and calls the function named "addProduct" when "button" is clicked. -->
				</div>
			</div>
		</div>
	</div>
</form>